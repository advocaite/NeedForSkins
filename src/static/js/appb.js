function cc(t){return t in ccs?'&nbsp;<a href="'+ccs[t].url+'" target="_blank" title="'+ccs[t].title+'"><img src="'+ccs[t].icon+'" alt="[#]"/></a>':""}function myround(t){t=parseFloat(t);var e;return e=t>99.99?Math.round(t):t.toFixed(t>9.99&&99.99>t?1:2)}function htmlspecialchars(t){return"string"==typeof t&&(t=t.replace(/&/g,"&amp;"),t=t.replace(/"/g,"&quot;"),t=t.replace(/'/g,"&#039;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;")),t}function antispam(t){var e=t.replace(/\s+/,"").match(/(([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?)/i);return e&&!e[1].match(/needforskins?\.com/i)?t.replace(/([\da-z\.-]+)\.([a-z\.]{2,4})([\/\w \.-]*)*\/?/i,"âœª"):t}function itemsknob(t){t>maxitems&&(console.log("itemsknob(): value is "+t+" (>"+maxitems+"); setting value "+maxitems),t=maxitems),0>t&&(console.log("itemsknob(): value is "+t+" (<0); setting value 0"),t=0);{var e=$(".knobitems");e.attr("value")}e.animate({value:t},{duration:500,easing:"easeOutCubic",progress:function(){e.val(Math.ceil(this.value)).trigger("change")}})}function timerknob(t){var e=$(".knobtimer");e.animate({value:t},{duration:0,easing:"",progress:function(){e.val(Math.ceil(this.value)).trigger("change"),timeleft>-1&&$("#timeleft").text(t)}})}function updatetimer(){var t=parseInt($("div#timeleft").text());timeleft=t-1,timerknob(timeleft)}var io=io.connect("http://needforskins.com:3000"),interval,intervalrunning=!1,userid2;$("#test").click(function(){$.ajax({type:"GET",dataType:"html",url:"roulette.php?"+Math.random(),success:function(t){$("#roulette").show(),$(".roulette2").html(t),console.log("Showing roulette...")}})}),$(document).ready(function(){var t=Math.max($("#chat").height(),$("#sidebar").height(),$("#content").height());$("#sidebar").height(t),$("#content").height(t);var e=parseInt($("div#timeleft").text()),a=parseInt(e);a<maxtimer&&(intervalrunning!==!0?(interval=setInterval(updatetimer,1e3),intervalrunning=!0):console.log("interval already set..."));var i=$("#userid").text(),n=$(".grid").isotope({itemSelector:".item",sortAscending:!1,sortBy:"cost",getSortData:{cost:".sortcost",quality:"[data-quality]"},masonry:{columnWidth:132}}),r=$("#playerlist").isotope({itemSelector:".playerrow",sortAscending:!1,sortBy:"val",getSortData:{val:"[data-val]"}});$("#playerlist").on("click","button",function(){var t=$(this),e=$(this).attr("data-filter"),a=$(this).attr("data-originalfilter");"*"===e?($(".filter").each(function(){$(this).html("show"),$(this).attr("data-filter",$(this).attr("data-originalfilter"))}),t.html("show"),t.attr("data-filter",a)):($(".filter").each(function(){$(this).html("show"),$(this).attr("data-filter",$(this).attr("data-originalfilter"))}),t.html("hide"),t.attr("data-filter","*")),n.isotope({filter:e})}),$("#itemsby").on("click","button",function(){var t=$(this).attr("data-sort");n.isotope({sortBy:t})}),$(".knobtimer").each(function(){var t=$(this),e=(t.attr("data-fgColor"),t.attr("value"));t.knob({min:0,max:maxtimer,readOnly:!0,dynamicDraw:!0,displayInput:!1,draw:function(){}}),$({value:0}).animate({value:e},{duration:500,easing:"easeOutCubic",progress:function(){t.val(Math.ceil(this.value)).trigger("change")}})}),$(".knobitems").each(function(){var t=$(this),e=(t.attr("data-fgColor"),t.attr("value"));t.knob({min:0,max:maxitems,readOnly:!0,dynamicDraw:!0,displayInput:!1,draw:function(){}}),$({value:0}).animate({value:e},{duration:500,easing:"easeOutCubic",progress:function(){t.val(Math.ceil(this.value)).trigger("change")}})}),console.log("SteamID: "+i),io.on("handshake",function(t){console.log("Connected.")}),io.on("online",function(t){$("#online").text(t),console.log("Online: "+t)}),io.on("steamstatus",function(t){console.log("Received steam status."),$("#steamstatus").html(t)}),io.on("cc",function(t){console.log("cc: "+t),$("#cc").html(t)}),io.on("message",function(t){console.log("Received message."+t.to+"=="+i),i===t.to&&alert(t.msg)}),io.on("roundstart",function(t){console.log("Round started."),intervalrunning!==!0?(interval=setInterval(updatetimer,1e3),intervalrunning=!0):console.log("interval already set...")}),io.on("roundupdate",function(t){console.log("Received round update.");for(var t=JSON.parse(t),e=t.newitems,a=t.newitems.length,s=[],l=0,o=0;a>o;o++)l+=e[o].cost,s[o]=$('<div class="item i'+e[o].userid+" i"+e[o].qualityclass+'" data-quality="i'+e[o].qualityclass+'"><img src="http://steamcommunity-a.akamaihd.net/economy/image/'+e[o].icon+'/105fx98f" alt="LOADING"/><span class="itemprice">$<span class="sortcost">'+e[o].cost+'</span></span><span class="iteminfo">'+e[o].item+"</span></div>"),n.isotope("insert",s[o]);if(e[0].username=antispam(e[0].username),$("#p"+e[0].userid).length){var m=parseInt($("#deposit"+e[0].userid).text()),c=a+m,u=parseFloat($("#value"+e[0].userid).text().replace("$","")),d=l+u,p=$('<div class="playerrow" id="p'+e[0].userid+'" data-val="'+l+'"><div class="playeravatar"><img src="'+e[0].avatar+'" alt=""/></div><div class="playerinfo"><span class="playername"><a href="http://steamcommunity.com/profiles/'+e[0].userid+'/" target="_blank">'+htmlspecialchars(e[0].username)+"</a>"+cc(e[0].userid)+'</span><br/><span>deposited <span id="deposit'+e[0].userid+'" class="normalspan">'+c+'</span> items (<button class="filter link" data-filter=".i'+e[0].userid+'" data-originalfilter=".i'+e[0].userid+'" title="items deposited by '+htmlspecialchars(e[0].username)+'">show</button>) <b id="value'+e[0].userid+'">$'+myround(d)+"</b></span><br/></div></div>");$("#p"+e[0].userid).remove()}else var p=$('<div class="playerrow" id="p'+e[0].userid+'" data-val="'+l+'"><div class="playeravatar"><img src="'+e[0].avatar+'" alt=""/></div><div class="playerinfo"><span class="playername"><a href="http://steamcommunity.com/profiles/'+e[0].userid+'/" target="_blank">'+htmlspecialchars(e[0].username)+"</a>"+cc(e[0].userid)+'</span><br/><span>deposited <span id="deposit'+e[0].userid+'" class="normalspan">'+a+'</span> items (<button class="filter link" data-filter=".i'+e[0].userid+'" data-originalfilter=".i'+e[0].userid+'" title="items deposited by '+htmlspecialchars(e[0].username)+'">show</button>) <b id="value'+e[0].userid+'">$'+myround(l)+"</b></span><br/></div></div>");if(r.isotope("insert",p),0!=i)if(i==e[0].userid){var h=a+parseInt($("#myitems").text());$("#myitems").text(h);var v=l+parseFloat($("#myvalue").text());$("#myvalue").text(myround(v));var g=v/t.current_bank*100;$("#mychance").text(myround(g))}else if($("#value"+i).length){var y=$("#myvalue").text();console.log(y+" / "+t.current_bank);var f=parseFloat(parseFloat($("#myvalue").text())/t.current_bank*100);console.log(f),$("#mychance").text(myround(f))}$("#playersnum").html(t.playersnum+" "),$("#gameid").html(t.current_game),$("#itemsinpot").html(t.itemsnum+"/50"),itemsknob(t.itemsnum),$("#potworth").html("$"+myround(t.current_bank)),$("#potworth2").html(myround(t.current_bank)),$("title").html("$"+myround(t.current_bank)+" NeedForSkins.com"),$("#itemsnum").html(t.itemsnum)}),io.on("roundend",function(t){console.log("Round ended.");var t=JSON.parse(t);t.winnername=antispam(t.winnername);var e=$('<div class="playeravatar"><img src="'+t.winneravatar+'" alt=""/></div><div class="playerinfo"><span class="playername"><a href="http://steamcommunity.com/profiles/'+t.winnerid+'/" target="_blank">'+htmlspecialchars(t.winnername)+"</a>"+cc(t.winnerid)+"</span><br/><span>Won with a $"+myround(t.winnerdeposit)+" deposit</span><b>$"+myround(t.totalvalue)+'</b></span><br/></div><div style="padding-left:5px;display:inline-block;font-size:85%;color:lightgray">winning ticket at: '+t.winnerpercent+"%<br/>secret: "+t.winnersecret+"<br/>hash: "+t.winnerhash+'<br/><a href="provablyfair.php?hash='+t.winnerhash+"&amp;secret="+t.winnersecret+"&amp;roundwinpercentage="+t.winnerpercent+"&amp;totaltickets="+myround(t.totalvalue)+'" target="_blank">Verify round</a></div>');clearInterval(interval),intervalrunning=!1,a=maxtimer,$(".hidemetheyrecoming").hide(),$(".hidemetheyrecoming").html(e),$(".roulette2").empty(),$.ajax({type:"GET",dataType:"html",url:"roulette.php",success:function(t){$(".roulette2").html(t),console.log("Showing roulette...")}}),$("#roulleteworth").html(myround(t.totalvalue)),$("#winnername").hide(),$("#winnername").html(htmlspecialchars(t.winnername)),$("#roulette").show(),$("#playerlist").empty(),$("#hash").text(t.newhash);var i=parseInt($("#gameid").text())+1;$("#gameid").html(i),$("#itemsinpot").html("0/50"),itemsknob(0),timerknob(maxtimer),$("div#timeleft").text(maxtimer),$("#potworth").html("$0"),$("#potworth2").html("0"),$("#itemsnum").html("0"),$("#myitems").html("0"),$("#myvalue").html("0"),$("#mychance").html("0"),$("#inventoryitems").empty(),$("#playersnum").html("0 "),$("title").html("NeedForSkins.com")})});